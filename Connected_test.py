
#answer = [['pax_1_2', 0.0], ['pax_1_3', 0.0],
# ['pax_1_4', 108.0], ['pax_1_5', 0.0],
# ['pax_1_6', 0.0], ['pax_1_7', 60.0],
# ['pax_1_8', 72.0], ['pax_1_9', 108.0],
# ['pax_1_10', 0.0], ['pax_2_3', 0.0],
# ['pax_2_4', 0.0], ['pax_2_5', 0.0], 
# ['pax_2_6', 96.0], ['pax_2_7', 0.0],
# ['pax_2_8', 0.0], ['pax_2_9', 0.0],
# ['pax_2_10', 0.0], ['pax_3_4', 0.0],
# ['pax_3_5', 0.0], ['pax_3_6', 0.0],
# ['pax_3_7', 0.0], ['pax_3_8', 80.0],
# ['pax_3_9', 0.0], ['pax_3_10', 0.0],
# ['pax_4_5', 0.0], ['pax_4_6', 0.0],
# ['pax_4_7', 0.0], ['pax_4_8', 0.0],
# ['pax_4_9', 0.0], ['pax_4_10', 0.0],
# ['pax_5_6', 0.0], ['pax_5_7', 0.0],
# ['pax_5_8', 108.0], ['pax_5_9', 0.0],
# ['pax_5_10', 60.0], ['pax_6_7', 0.0],
# ['pax_6_8', 0.0], ['pax_6_9', 0.0],
# ['pax_6_10', 0.0], ['pax_7_8', 60.0],
# ['pax_7_9', 0.0], ['pax_7_10', 0.0],
# ['pax_8_9', 0.0], ['pax_8_10', 0.0],
# ['pax_9_10', 0.0], ['x_1_2', 0.0],
# ['x_1_3', 0.0], ['x_1_4', 1.0],
# ['x_1_5', 0.0], ['x_1_6', 0.0],
# ['x_1_7', 1.0], ['x_1_8', 1.0],
# ['x_1_9', 1.0], ['x_1_10', 0.0],
# ['x_2_3', 0.0], ['x_2_4', 0.0],
# ['x_2_5', 0.0], ['x_2_6', 1.0],
# ['x_2_7', 0.0], ['x_2_8', 0.0],
# ['x_2_9', 0.0], ['x_2_10', 0.0],
# ['x_3_4', 0.0], ['x_3_5', 0.0],
# ['x_3_6', 0.0], ['x_3_7', 0.0],
# ['x_3_8', 1.0], ['x_3_9', 0.0],
# ['x_3_10', 0.0], ['x_4_5', 0.0],
# ['x_4_6', 0.0], ['x_4_7', 0.0],
# ['x_4_8', 0.0], ['x_4_9', 0.0],
# ['x_4_10', 0.0], ['x_5_6', 0.0],
# ['x_5_7', 0.0], ['x_5_8', 1.0],
# ['x_5_9', 0.0], ['x_5_10', 1.0],
# ['x_6_7', 0.0], ['x_6_8', 0.0],
# ['x_6_9', 0.0], ['x_6_10', 0.0],
# ['x_7_8', 1.0], ['x_7_9', 0.0],
# ['x_7_10', 0.0], ['x_8_9', 0.0],
# ['x_8_10', 0.0], ['x_9_10', 0.0],
# ['nt_1_2', 0.0], ['nt_1_3', 0.0],
# ['nt_1_4', 9.0], ['nt_1_5', 0.0],
# ['nt_1_6', 0.0], ['nt_1_7', 5.0],
# ['nt_1_8', 6.0], ['nt_1_9', 9.0],
# ['nt_1_10', 0.0], ['nt_2_3', 0.0],
# ['nt_2_4', 0.0], ['nt_2_5', 0.0],
# ['nt_2_6', 8.0], ['nt_2_7', 0.0],
# ['nt_2_8', 0.0], ['nt_2_9', 0.0],
# ['nt_2_10', 0.0], ['nt_3_4', 0.0],
# ['nt_3_5', 0.0], ['nt_3_6', 0.0],
# ['nt_3_7', 0.0], ['nt_3_8', 7.0],
# ['nt_3_9', 0.0], ['nt_3_10', 0.0],
# ['nt_4_5', 0.0], ['nt_4_6', 0.0],
# ['nt_4_7', 0.0], ['nt_4_8', 0.0],
# ['nt_4_9', 0.0], ['nt_4_10', 0.0],
# ['nt_5_6', 0.0], ['nt_5_7', 0.0],
# ['nt_5_8', 9.0], ['nt_5_9', 0.0],
# ['nt_5_10', 5.0], ['nt_6_7', 0.0],
# ['nt_6_8', 0.0], ['nt_6_9', 0.0],
# ['nt_6_10', 0.0], ['nt_7_8', 5.0],
# ['nt_7_9', 0.0], ['nt_7_10', 0.0],
# ['nt_8_9', 0.0], ['nt_8_10', 0.0],
# ['nt_9_10', 0.0], ['nv_1_2', 0.0],
# ['nv_1_3', 0.0], ['nv_1_4', 18.0],
# ['nv_1_5', 0.0], ['nv_1_6', 0.0],
# ['nv_1_7', 10.0], ['nv_1_8', 12.0],
# ['nv_1_9', 18.0], ['nv_1_10', 0.0],
# ['nv_2_3', 0.0], ['nv_2_4', 0.0],
# ['nv_2_5', 0.0], ['nv_2_6', 16.0],
# ['nv_2_7', 0.0], ['nv_2_8', 0.0],
# ['nv_2_9', 0.0], ['nv_2_10', 0.0],
# ['nv_3_4', 0.0], ['nv_3_5', 0.0],
# ['nv_3_6', 0.0], ['nv_3_7', 0.0],
# ['nv_3_8', 14.0], ['nv_3_9', 0.0],
# ['nv_3_10', 0.0], ['nv_4_5', 0.0],
# ['nv_4_6', 0.0], ['nv_4_7', 0.0],
# ['nv_4_8', 0.0], ['nv_4_9', 0.0],
# ['nv_4_10', 0.0], ['nv_5_6', 0.0],
# ['nv_5_7', 0.0], ['nv_5_8', 18.0],
# ['nv_5_9', 0.0], ['nv_5_10', 10.0],
# ['nv_6_7', 0.0], ['nv_6_8', 0.0],
# ['nv_6_9', 0.0], ['nv_6_10', 0.0],
# ['nv_7_8', 10.0], ['nv_7_9', 0.0],
# ['nv_7_10', 0.0], ['nv_8_9', 0.0],
# ['nv_8_10', 0.0], ['nv_9_10', 0.0]]

test = [['x_1_2', 0.0],
 ['x_1_3', 1.0],
 ['x_1_4', 0.0],
 ['x_1_5', 0.0],
 ['x_1_6', 1.0],
 ['x_1_7', 0.0],
 ['x_1_8', 0.0],
 ['x_1_9', 0.0],
 ['x_1_10', 0.0],
 ['x_1_11', 0.0],
 ['x_1_12', 0.0],
 ['x_1_13', 0.0],
 ['x_1_14', 0.0],
 ['x_2_3', 0.0],
 ['x_2_4', 1.0],
 ['x_2_5', 0.0],
 ['x_2_6', 1.0],
 ['x_2_7', 0.0],
 ['x_2_8', 0.0],
 ['x_2_9', 0.0],
 ['x_2_10', 0.0],
 ['x_2_11', 0.0],
 ['x_2_12', 0.0],
 ['x_2_13', 0.0],
 ['x_2_14', 0.0],
 ['x_3_4', 1.0],
 ['x_3_5', 0.0],
 ['x_3_6', 0.0],
 ['x_3_7', 0.0],
 ['x_3_8', 0.0],
 ['x_3_9', 0.0],
 ['x_3_10', 0.0],
 ['x_3_11', 0.0],
 ['x_3_12', 0.0],
 ['x_3_13', 0.0],
 ['x_3_14', 1.0],
 ['x_4_5', 0.0],
 ['x_4_6', 1.0],
 ['x_4_7', 0.0],
 ['x_4_8', 0.0],
 ['x_4_9', 1.0],
 ['x_4_10', 0.0],
 ['x_4_11', 0.0],
 ['x_4_12', 0.0],
 ['x_4_13', 0.0],
 ['x_4_14', 0.0],
 ['x_5_6', 0.0],
 ['x_5_7', 0.0],
 ['x_5_8', 0.0],
 ['x_5_9', 1.0],
 ['x_5_10', 0.0],
 ['x_5_11', 1.0],
 ['x_5_12', 0.0],
 ['x_5_13', 0.0],
 ['x_5_14', 0.0],
 ['x_6_7', 0.0],
 ['x_6_8', 0.0],
 ['x_6_9', 0.0],
 ['x_6_10', 0.0],
 ['x_6_11', 0.0],
 ['x_6_12', 0.0],
 ['x_6_13', 0.0],
 ['x_6_14', 0.0],
 ['x_7_8', 0.0],
 ['x_7_9', 0.0],
 ['x_7_10', 1.0],
 ['x_7_11', 0.0],
 ['x_7_12', 0.0],
 ['x_7_13', 1.0],
 ['x_7_14', 0.0],
 ['x_8_9', 0.0],
 ['x_8_10', 0.0],
 ['x_8_11', 0.0],
 ['x_8_12', 1.0],
 ['x_8_13', 0.0],
 ['x_8_14', 0.0],
 ['x_9_10', 0.0],
 ['x_9_11', 0.0],
 ['x_9_12', 0.0],
 ['x_9_13', 0.0],
 ['x_9_14', 0.0],
 ['x_10_11', 0.0],
 ['x_10_12', 0.0],
 ['x_10_13', 0.0],
 ['x_10_14', 0.0],
 ['x_11_12', 0.0],
 ['x_11_13', 0.0],
 ['x_11_14', 0.0],
 ['x_12_13', 0.0],
 ['x_12_14', 0.0],
 ['x_13_14', 0.0]]

class Get_list_with_possible_connections():
    
    def __init__(self, output):
        #output is a list with all possible connections
        self.output = output
        
    def connected(self, use):
        #make an empty list where all the connections will be appended to
        connected_lst = []
        #Node is the first node in list use, the list use is a list with all active connections
        node = use[0][2::].partition('_')[0]
        
        for j in use:
            #loop through the list with active connections and retreive all that are 
            #connected to the first node
            if j[2::].partition('_')[0] == node:
                #if connected to the first node append to the list for connections
                connected_lst.append(j)
        
        def connected_again(node):
            #make an empty list for the conections to the input node
            connected_lst_again =[]
            for j in use:
                #Check if connected to the node for both ways from x to y but also from y to x
                if j[2::].partition('_')[0] == node:
                    connected_lst_again.append(j)
                if j[2::].partition('_')[2] == node:
                    connected_lst_again.append(j)
            #return the list with all connections
            return connected_lst_again
        
        #makes sure the while loop can start
        lenght = len(list(set(connected_lst))) - 1
        while lenght < len(list(set(connected_lst))):
            #make the list a set so there are only unique nodes
            #update the length so that the while loop will stop eventually
            lenght = len(list(set(connected_lst)))
            #loop through the list to get all the nodes the first node is connected to
            for i in list(set(connected_lst)):
                #make the connected nodes the primary node
                node = i[2::].partition('_')[2]
                #make sure the list is not empty
                if connected_again(node) != []:
                    #get a list of all the connections of the newly chosen primary node
                    values = connected_again(node)
                    #append the list to the previous already made list
                    for k in values:
                        connected_lst.append(k)
                #check again for from x to y and from y to x
                node = i[2::].partition('_')[0]
                if connected_again(node) != []:
                    #make sure the list is not empty
                    values = connected_again(node)
                    #append the list to the previous already made list
                    for k in values:
                        connected_lst.append(k)
                
        #return a set of unique connected nodes        
        return sorted(list(set(connected_lst)))
    
    def get_list_with_connected_nodes(self):
        #make empty list to put all the active nodes in
        lst = []
        #loop through all the nodes and append the active ones to the list
        for i in self.output:
            if i[1] != 0.0:
                lst.append(i[0]) 
        #make an empty list for all the groups of connections
        all_loops = []    
        #loop through the active nodes till all groups of connected nodes are found
        while len(lst) != 0:
            #make  use of the previous def to get all the connected nodes
            connected_list = self.connected(lst)
            #remove all the visited nodes from the active nodes list
            lst = [x for x in lst if x not in connected_list]
            all_loops.append(connected_list)
        
        return all_loops
    
    def get_possible_connections(self):
        #get the lsit with all the groups of connections
        all_loops = self.get_list_with_connected_nodes()
        #make an empty list for all the nodes, so this list includes for exmple [1,2,3,4,5,9,10,14,etc.]
        lst_with_str = []        
        #loop through the list with groups of connections
        for x in all_loops:
            
            for m in x:
                #append all the nodes to the previously made list for exmaple node x_1_2 this will add node one
                lst_with_str.append(m[2::].partition('_')[0])
                #this will add node 2 
                lst_with_str.append(m[2::].partition('_')[2])
            #Separate the gorups of connections     
            lst_with_str.append(' ')
        #make an empty list for the possible connections
        all_connecties = []
        #go through the list with all the nodes
        for q in lst_with_str:
            #make an mark for the first group of nodes
            index = lst_with_str.index(" ")
            #loop through the list until the mark
            for c in range(0,index):
                #make a mark till the next group of nodes
                index2 = index+1+lst_with_str[index+1::].index(" ")
                #loop through the next group of nodes
                for k in range(index+1,index2):
                    #make sure that it add alsways the smaller node to the larger one, so to get x_1_10 and not x_10_1
                    if int(lst_with_str[c])<int(lst_with_str[k]):
                        all_connecties.append(f'x_{lst_with_str[c]}_{lst_with_str[k]}')
                    else:
                        all_connecties.append(f'x_{lst_with_str[k]}_{lst_with_str[c]}')
        #return the list of all possible connections nodes      
        return list(set(all_connecties))
            
        
                
                
        
a = Get_list_with_possible_connections(test)
print(a.get_list_with_connected_nodes())